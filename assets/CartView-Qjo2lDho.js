import{c as l,o as i,a as t,_ as $,u as B,r as w,d as g,h as s,K as N,w as n,C as R,i as a,ac as T,g as z,t as o,D as d,S as D,x as y,F as I,k as G,z as O,Y as Q,p as j,G as Y,ad as A}from"./index-DR3PUBht.js";import{N as E,Q as K,V as L}from"./disclosure-D4x6rsqj.js";function P(q,u){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}const H={class:"container mx-auto px-4 py-8 max-w-6xl"},M={key:0,class:"text-center py-12 bg-light-secondary dark:bg-dark-secondary rounded-lg shadow-sm border border-light-neutral-300 dark:border-dark-neutral-600"},U={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-8"},J={class:"md:col-span-2","aria-labelledby":"cart-items-heading"},W={class:"space-y-2 text-sm"},X={class:"flex justify-between text-light-text-primary dark:text-dark-text-primary"},Z={class:"flex justify-between"},tt={key:0,class:"text-light-text-primary dark:text-dark-text-primary"},et={key:1,class:"text-accent-tertiary"},rt={class:"border-t border-light-neutral-300 dark:border-dark-neutral-600 pt-2 mt-2"},at={class:"flex justify-between font-bold text-light-text-primary dark:text-dark-text-primary"},st={class:"relative"},ot=["src","alt"],nt={class:"ml-6 flex-grow"},lt={class:"text-light-text-secondary dark:text-dark-text-secondary mt-1"},it={class:"flex items-center mt-3"},dt={class:"flex items-center border border-light-neutral-300 dark:border-dark-neutral-600 rounded-md shadow-sm"},ut=["onClick"],ct={class:"px-4 py-1 min-w-[40px] text-center text-light-text-primary dark:text-dark-text-primary","aria-label":"Quantity"},xt=["onClick"],mt=["onClick"],pt={class:"text-right"},ft={class:"font-semibold text-light-text-primary dark:text-dark-text-primary"},gt={class:"bg-light-secondary dark:bg-dark-secondary p-6 rounded-lg shadow-sm h-fit md:sticky md:top-24 hidden md:block border border-light-neutral-300 dark:border-dark-neutral-600","aria-labelledby":"order-summary-heading"},yt={class:"space-y-4"},vt={class:"flex justify-between text-light-text-primary dark:text-dark-text-primary"},kt={class:"flex justify-between text-light-text-primary dark:text-dark-text-primary"},bt={key:0},ht={key:1,class:"text-accent-tertiary font-medium"},_t={key:0,class:"text-sm bg-accent-quaternary/10 text-accent-quaternary p-3 rounded-md"},wt={class:"mt-1"},Ct={class:"border-t border-light-neutral-300 dark:border-dark-neutral-600 pt-4 mt-2"},St={class:"flex justify-between font-bold text-lg text-light-text-primary dark:text-dark-text-primary"},jt={class:"mt-8 space-y-4"},qt={class:"fixed inset-0 overflow-y-auto"},Vt={class:"flex min-h-full items-center justify-center p-4 text-center"},Ft={class:"mt-2"},$t={class:"text-sm text-light-text-secondary dark:text-dark-text-secondary"},Bt={class:"mt-6 flex space-x-3 justify-end"},Nt={__name:"CartView",setup(q){const u=B(),b=w(!1),x=w(!1),m=w(null),v=g(()=>u.cart),p=g(()=>u.subtotal),h=g(()=>u.itemCount),c=g(()=>p.value>=1e4?0:1e3),C=g(()=>p.value+c.value),S=async(f,e)=>{b.value=!0,e<=0?await u.removeFromCart(f):await u.updateQuantity(f,e),setTimeout(()=>{b.value=!1},300)},V=f=>{m.value=f,x.value=!0},F=()=>{m.value&&(u.removeFromCart(m.value.id),x.value=!1,m.value=null)};return(f,e)=>{const k=R("router-link");return i(),l("main",H,[e[18]||(e[18]=t("h1",{class:"text-3xl font-bold mb-8 text-light-text-primary dark:text-dark-text-primary"},"Shopping Cart",-1)),v.value.length===0?(i(),l("div",M,[e[3]||(e[3]=N('<div class="w-40 h-40 mx-auto mb-6" data-v-51fffd1c><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-full h-full text-light-neutral-400 dark:text-dark-neutral-500" data-v-51fffd1c><circle cx="9" cy="21" r="1" fill="currentColor" data-v-51fffd1c></circle><circle cx="20" cy="21" r="1" fill="currentColor" data-v-51fffd1c></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke-linecap="round" stroke-linejoin="round" data-v-51fffd1c></path><line x1="5" y1="5" x2="22" y2="5" class="text-red-500" stroke-width="1.5" data-v-51fffd1c></line></svg></div><p class="text-xl mb-6 text-light-text-secondary dark:text-dark-text-secondary" data-v-51fffd1c>Your cart is empty</p>',2)),s(k,{to:"/products",class:"bg-orange-500 hover:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-500 text-white px-6 py-3 rounded-md inline-block transition-colors focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:outline-none"},{default:n(()=>e[2]||(e[2]=[y(" Browse Products ")])),_:1})])):(i(),l("div",U,[t("section",J,[e[9]||(e[9]=t("h2",{id:"cart-items-heading",class:"sr-only"},"Cart Items",-1)),s(a(E),{as:"div",class:"mb-6 md:hidden"},{default:n(()=>[s(a(K),{class:"flex w-full justify-between rounded-lg bg-light-secondary dark:bg-dark-secondary px-4 py-3 text-left text-sm font-medium text-light-text-primary dark:text-dark-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary"},{default:n(()=>[t("span",null,"Order Summary ("+o(h.value)+" items)",1),s(a(P),{class:"h-5 w-5 ui-open:rotate-180 ui-open:transform transition-transform"})]),_:1}),s(a(L),{class:"px-4 pt-4 pb-2 bg-light-secondary dark:bg-dark-secondary rounded-b-lg"},{default:n(()=>[t("div",W,[t("div",X,[e[4]||(e[4]=t("span",null,"Subtotal",-1)),t("span",null,o(a(d)(p.value)),1)]),t("div",Z,[e[5]||(e[5]=t("span",{class:"text-light-text-primary dark:text-dark-text-primary"},"Shipping",-1)),c.value>0?(i(),l("span",tt,o(a(d)(c.value)),1)):(i(),l("span",et,"Free"))]),t("div",rt,[t("div",at,[e[6]||(e[6]=t("span",null,"Total",-1)),t("span",null,o(a(d)(C.value)),1)])])])]),_:1})]),_:1}),s(T,{name:"cart-item",tag:"ul",class:"divide-y divide-light-neutral-300 dark:divide-dark-neutral-600"},{default:n(()=>[(i(!0),l(I,null,G(v.value,r=>(i(),l("li",{key:r.id,class:O(["flex py-6 first:pt-0 items-center cart-item-transition",{"opacity-50":b.value}])},[t("div",st,[t("img",{src:r.image,alt:r.name,class:"w-24 h-24 object-cover rounded-md shadow-sm",loading:"lazy"},null,8,ot)]),t("div",nt,[s(k,{to:`/product/${r.id}`,class:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary hover:text-orange-500 dark:hover:text-orange-400 focus:outline-none focus:underline","aria-label":`View ${r.name} details`},{default:n(()=>[y(o(r.name),1)]),_:2},1032,["to","aria-label"]),t("p",lt,o(a(d)(r.price))+" each",1),t("div",it,[t("div",dt,[t("button",{onClick:_=>S(r.id,r.quantity-1),class:"px-3 py-1 text-light-text-primary dark:text-dark-text-primary hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-700 transition-colors rounded-l-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-inset","aria-label":"Decrease quantity"},e[7]||(e[7]=[t("span",{"aria-hidden":"true"},"âˆ’",-1)]),8,ut),t("span",ct,o(r.quantity),1),t("button",{onClick:_=>S(r.id,r.quantity+1),class:"px-3 py-1 text-light-text-primary dark:text-dark-text-primary hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-700 transition-colors rounded-r-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-inset","aria-label":"Increase quantity"},e[8]||(e[8]=[t("span",{"aria-hidden":"true"},"+",-1)]),8,xt)]),t("button",{onClick:_=>V(r),class:"ml-4 text-red-500 hover:text-red-700 transition-colors focus:outline-none focus:underline","aria-label":"Remove item from cart"}," Remove ",8,mt)])]),t("div",pt,[t("p",ft,o(a(d)(r.price*r.quantity)),1)])],2))),128))]),_:1})]),t("section",gt,[e[15]||(e[15]=t("h2",{id:"order-summary-heading",class:"text-xl font-bold mb-6 border-b border-light-neutral-300 dark:border-dark-neutral-600 pb-3 text-light-text-primary dark:text-dark-text-primary"},"Order Summary",-1)),t("div",yt,[t("div",vt,[t("span",null,"Subtotal ("+o(h.value)+" "+o(h.value===1?"item":"items")+")",1),t("span",null,o(a(d)(p.value)),1)]),t("div",kt,[e[10]||(e[10]=t("span",null,"Shipping",-1)),c.value>0?(i(),l("span",bt,o(a(d)(c.value)),1)):(i(),l("span",ht,"Free"))]),c.value>0?(i(),l("div",_t,[e[11]||(e[11]=t("p",null,"Free shipping on orders over KES 10,000",-1)),t("p",wt,"Add "+o(a(d)(1e4-p.value))+" more to qualify",1)])):z("",!0),t("div",Ct,[t("div",St,[e[12]||(e[12]=t("span",null,"Total",-1)),t("span",null,o(a(d)(C.value)),1)])])]),t("div",jt,[s(k,{to:"/checkout",class:"bg-orange-500 hover:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-500 text-white w-full py-3 block text-center rounded-md transition-colors focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",disabled:v.value.length===0,"aria-disabled":v.value.length===0},{default:n(()=>e[13]||(e[13]=[y(" Proceed to Checkout ")])),_:1},8,["disabled","aria-disabled"]),s(k,{to:"/products",class:"text-accent-quaternary hover:text-accent-quaternary/80 transition-colors text-center block focus:outline-none focus:underline"},{default:n(()=>e[14]||(e[14]=[y(" Continue Shopping ")])),_:1})])])])),s(a(D),{appear:"",show:x.value,as:"template"},{default:n(()=>[s(a(Q),{as:"div",onClose:e[1]||(e[1]=r=>x.value=!1),class:"relative z-10"},{default:n(()=>[s(a(j),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>e[16]||(e[16]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1}),t("div",qt,[t("div",Vt,[s(a(j),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[s(a(Y),{class:"w-full max-w-md transform overflow-hidden rounded-lg bg-light-secondary dark:bg-dark-secondary p-6 text-left align-middle shadow-xl transition-all"},{default:n(()=>{var r;return[s(a(A),{as:"h3",class:"text-lg font-medium leading-6 text-light-text-primary dark:text-dark-text-primary"},{default:n(()=>e[17]||(e[17]=[y(" Remove Item ")])),_:1}),t("div",Ft,[t("p",$t,' Are you sure you want to remove "'+o((r=m.value)==null?void 0:r.name)+'" from your cart? ',1)]),t("div",Bt,[t("button",{type:"button",class:"inline-flex justify-center rounded-md border border-light-neutral-300 dark:border-dark-neutral-600 bg-light-secondary dark:bg-dark-secondary px-4 py-2 text-sm font-medium text-light-text-primary dark:text-dark-text-primary hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary focus-visible:ring-offset-2",onClick:e[0]||(e[0]=_=>x.value=!1)}," Cancel "),t("button",{type:"button",class:"inline-flex justify-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-sm font-medium text-white hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:F}," Remove ")])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}},zt=$(Nt,[["__scopeId","data-v-51fffd1c"]]);export{zt as default};
